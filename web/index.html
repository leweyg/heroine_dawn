<html>
    <head><title>Heroine Dawn</title></head>
    <body>
        <h1>Heroine Dawn</h1>
        <br/>
        <center>
            <canvas id="main_canvas" width="160" height="120" style="width:640px;"></canvas>
            <br/>
            <input type="button" value="  <  " onclick="dawnGame.doInput('left');" />
            <input type="button" value="  ^  " onclick="dawnGame.doInput('forward');"  />
            <input type="button" value="  >  " onclick="dawnGame.doInput('right');" />
        </center>
        <p id="main_status">Loading...</p>
        <script src="scripts/game.js"></script>
        <script src="scripts/render.js"></script>
        <script>
            function main_init() {
                readJsonFile("world.json", (world) => {
                    main_status.innerHTML = "Loaded.";
                    dawnGame.initFromWorld(world);
                    dawnRenderer.initFromGameWorld(dawnGame, world, main_canvas, main_status);
                });
            }
        </script>
        <script>
            function readJsonFile(file, callback) {
                var rawFile = new XMLHttpRequest();
                rawFile.overrideMimeType("application/json");
                rawFile.open("GET", file, true);
                rawFile.onreadystatechange = function() {
                    if (rawFile.readyState === 4 && rawFile.status == "200") {
                        var obj = JSON.parse(rawFile.responseText);
                        callback(obj);
                    }
                }
                rawFile.send(null);
            }
        </script>
        <script>
            main_init();
        </script>
    </body>
</html>