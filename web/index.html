<html>
    <head><title>Heroine Dawn</title></head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
    <style>
        .input_buttons {
            padding:25px !important;
            background-color: rgb(80, 80, 80);
            color:white;
            -webkit-border-fit:border !important;
        }
    </style>
    <body style="color:white; background-color:black;">
        <br/>
        <center>
            <canvas id="main_canvas" width="160" height="120" style="width:95%;max-width: 840px;"></canvas>
            <br/>
            <input type="button" class="input_buttons" value="  &hookleftarrow;  " onclick="dawnGame.doInput('left');" />
            <input type="button" class="input_buttons" value="  &uarr;  " onclick="dawnGame.doInput('forward');"  />
            <input type="button" class="input_buttons" value="  &hookrightarrow;  " onclick="dawnGame.doInput('right');" />
            <p id="main_status">Loading...</p>
        </center>
        <script src="scripts/things.js"></script>
        <script src="scripts/game.js"></script>
        <script src="scripts/render.js"></script>
        <script>
            function main_init() {
                readJsonFile("world.json", (world) => {
                    main_status.innerHTML = "Loaded.";
                    dawnGame.initFromWorld(world);
                    dawnRenderer.initFromGameWorld(dawnGame, world, main_canvas, main_status);
                });
            }
        </script>
        <script>
            function readJsonFile(file, callback) {
                var rawFile = new XMLHttpRequest();
                rawFile.overrideMimeType("application/json");
                rawFile.open("GET", file, true);
                rawFile.onreadystatechange = function() {
                    if (rawFile.readyState === 4 && rawFile.status == "200") {
                        var obj = JSON.parse(rawFile.responseText);
                        callback(obj);
                    }
                }
                rawFile.send(null);
            }
        </script>
        <script>
            main_init();
        </script>
    </body>
</html>